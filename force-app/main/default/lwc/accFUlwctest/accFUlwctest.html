<template>
    
      
    <template if:true={recordListDocumentAllBlock}>
        
       <template  for:each={recordListDocumentAllBlock} for:item="docArray">    
           <lightning-card key={docArray}>
               <template  for:each={docArray} for:item="type">
               <h3 if:true={type.titleCondition} key={type.id} slot="title">{type.DocumentBlockFormula__c}</h3>  
                <div class="c-container " key={type.DocumentType__c} >
                
                    <div class="slds-grid">
                        <div class="slds-col slds-size_1-of-12 slds-p-around_small center-icon">
                            <lightning-icon if:true={type.boolUrlApproval}   icon-name="action:upload" alternative-text="Approved" class="slds-align_absolute-center approval-icon" ></lightning-icon>
                            <lightning-icon if:true={type.boolUrlStandBy}   icon-name="utility:warning" alternative-text="Warning!" variant="warning" class="slds-align_absolute-center standby-icon"  ></lightning-icon>
                            <lightning-icon if:true={type.boolLoading}   icon-name="utility:spinner" alternative-text="Fai refresh!" class="slds-align_absolute-center reset_password-icon" ></lightning-icon>
                        </div>
                        <div class="slds-col slds-size_4-of-12 slds-p-vertical_small slds-p-right_small">
                            <div>

                                <div if:true={type.ObligatarioAcc__c} ><h2 class="editObb" >*</h2></div><p class="p-document-name">&nbsp;&nbsp;{type.DocumentTypeNameFormula__c}</p></div>
                            
                                <template if:false={type.isDocEasyPlus}>
                                    <template if:true={type.boolServizi}>
                                    <lightning-file-upload            
                                        variant="brand"
                                        name={type.Id}
                                        accept={acceptedFormats}
                                        record-id={recordId}
                                        disabled={isErogazioneServizi}
                                        onuploadfinished={handleUploadFinished}
                                        aria-required="true"
                                        multiple>
                                </lightning-file-upload>  
                            </template>
                            <template if:false={type.boolServizi}>
                                <lightning-file-upload                   
                                variant="brand"
                                name={type.Id}
                                accept={acceptedFormats}
                                record-id={recordId}
                                disabled={isRecTypeRO}
                                onuploadfinished={handleUploadFinished}
                                aria-required="true"
                                multiple>
                        </lightning-file-upload>   
                    </template>
                    </template>
    
                    <template if:true={type.isDocEasyPlus}>
                        <template if:true={type.boolServizi}>
                        <lightning-file-upload            
                            variant="brand"
                            name={type.Id}
                            accept={acceptedFormats}
                            record-id={recordId}
                            disabled={fidimedAndErogazione}
                            onuploadfinished={handleUploadFinished}
                            aria-required="true"
                            multiple>
                    </lightning-file-upload>  
                </template>
                <template if:false={type.boolServizi}>
                    <lightning-file-upload                   
                    variant="brand"
                    name={type.Id}
                    accept={acceptedFormats}
                    record-id={recordId}
                    disabled={isNotFidimed}
                    onuploadfinished={handleUploadFinished}
                    aria-required="true"
                    multiple>
            </lightning-file-upload>   
        </template>
        </template>                          
                        </div>
                        <div class="slds-col slds-size_4-of-12"></div>
                        
                        <div class="slds-col slds-size_3-of-12 slds-p-top_x-large slds-p-right_small slds-align_absolute-right slds-size_small">

                            <template if:false={type.isDocEasyPlus}>
                           <lightning-combobox
                           if:true={type.Url_Documento__c}
                           name={type.Id}
                           label='Verifica Sales Support'
                           value={type.Verifica_Sales_Support__c}
                           placeholder={type.Verifica_Sales_Support__c}
                           options={options}
                           onchange={handleChange} 
                           disabled={isComboboxDisabled}>
                       </lightning-combobox>
                            </template>

                       <template if:true={type.isDocEasyPlus}>
                        <lightning-combobox
                       if:true={type.Url_Documento__c}
                       name={type.Id}
                       label='Verifica Sales Support'
                       value={type.Verifica_Sales_Support__c}
                       placeholder={type.Verifica_Sales_Support__c}
                       options={options}
                       onchange={handleChange} 
                       disabled={stopFidimed}>
                    </lightning-combobox>
                    </template>

                       </div>
                      
                </div>
                <div class="slds-grid">
                    <div class="slds-col slds-size_1-of-12 slds-col slds-size_1-of-12 slds-p-around_small center-icon">
                    </div>
                    <div class="slds-col slds-size_4-of-12 slds-p-vertical_small slds-p-right_small">
                        <template if:true={isRecTypeRO}>
                            <lightning-textarea class="textareaUpload"  disabled="true" onchange={onchangeButton} name={type.Id} value={type.Commento_Sales_Support__c}  label={labelComment} maxlength="500"
                                            message-when-too-long="A maximum of 140 characters are allowed in a tweet." placeholder={placeComment} >    
                            </lightning-textarea>
                           </template>
   
                           <template if:false={isRecTypeRO}>
                               <lightning-textarea class="textareaUpload"  disabled={noteVisbile} onchange={onchangeButton} name={type.Id} value={type.Commento_Sales_Support__c}  label={labelComment} maxlength="500"
                                               message-when-too-long="A maximum of 140 characters are allowed in a tweet." placeholder={placeComment} >    
                               </lightning-textarea>
                              </template>
                    </div>

                    <div class="slds-col slds-size_4-of-12 slds-p-top_medium slds-p-right_small slds-align_absolute-right slds-size_small" ></div>
                    <div class="slds-col slds-size_3-of-12 slds-p-top_x-large slds-p-right_small slds-align_absolute-right slds-size_small">
                        <lightning-button   if:true={type.Url_Documento__c}  variant="brand" flexibility="grow" label="Vai al documento" onclick={openDocument} class="button-verifica slds-align_absolute-right" name={type.Url_Documento__c}></lightning-button>
                    </div>


                               </div>
                               
                    <div class="slds-grid">
                        <div class="slds-col slds-size_1-of-12 slds-p-around_small">

                        </div>
                        <template if:false={salvabuttonhidden}>
                        <div class="slds-col slds-size_2-of-20 slds-p-vertical_small slds-p-right_small slds-m-right_x-small">
                         <lightning-button  disabled={isRecTypeRO} data-id={type.Id} label="SALVA" id={type.Id} onclick={updateUrl} name={type.Id} class="button-save"></lightning-button>

                     </div>
                    </template>
                   
                    </div>
               
               
            </div> 
        </template>
        
    </lightning-card>
    </template> 
</template> 
</template>